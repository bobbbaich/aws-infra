#file: noinspection YAMLSchemaValidation
AWSTemplateFormatVersion: '2010-09-09'
Description: This template deploys EventBridge resources

Parameters:
  EnvironmentName:
    Type: String

Resources:
  EventBus:
    Type: AWS::Events::EventBus
    Properties:
      Name: !Sub ${EnvironmentName}-event-bus

  SchemaRegistry:
    Type: AWS::EventSchemas::Registry
    Properties:
      RegistryName: !Sub ${EnvironmentName}-schema-registry
      Description: !Sub ${EnvironmentName} schema registry

  RewardSchema:
    Type: AWS::EventSchemas::Schema
    Properties:
      RegistryName: !Ref SchemaRegistry
      Type: OpenApi3
      Description: Reward schema
      Content: |
        {
          "openapi": "3.0.0",
          "info": {
            "title": "Reward Schema",
            "version": "1.0"
          },
          "paths": {
          },
          "components": {
            "schemas": {
              "Reward": {
                "type": "object",
                "properties": {
                  "uuid": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  }
                },
                "required": [
                  "uuid",
                  "name"
                ]
              }
            }
          }
        }