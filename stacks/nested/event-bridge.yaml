AWSTemplateFormatVersion: '2010-09-09'
Description: This template deploys Event Bridge resources

Parameters:
  EnvironmentName:
    Type: String

Resources:

  SchemaRegistry:
    Type: AWS::EventSchemas::Registry
    Properties:
      RegistryName: !Sub ${EnvironmentName}-schema-registry
      Description: !Sub ${EnvironmentName} schema registry

  RewardsSchema:
    Type: AWS::EventSchemas::Schema
    Properties:
      RegistryName: !Ref SchemaRegistry
      Type: OpenApi3
      Description: Rewards Events Schema
      Content: |
        {
          "openapi": "3.0.0",
          "info": {
            "title": "MyEvent",
            "version": "1.0"
          },
          "components": {
            "schemas": {
              "Reward": {
                "type": "object",
                "properties": {
                  "uuid": {
                    "type": "string"
                  },
                  "name": {
                    "type": "string"
                  }
                },
                "required": ["uuid", "name"]
              }
            }
          }
        }